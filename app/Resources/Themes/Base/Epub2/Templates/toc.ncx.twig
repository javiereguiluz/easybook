<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ncx PUBLIC "-//NISO//DTD ncx 2005-1//EN" "http://www.daisy.org/z3986/2005/ncx-2005-1.dtd">
 
<ncx version="2005-1" xml:lang="{{ book.author }}" xmlns="http://www.daisy.org/z3986/2005/ncx/">

    <head>
        <meta name="dtb:uid" content="{{ edition.id.value }}" />
        <meta name="dtb:depth" content="{{ edition.toc.deep }}" />
        <meta name="dtb:totalPageCount" content="0" /> <!-- must be 0 -->
        <meta name="dtb:maxPageNumber" content="0" />  <!-- must be 0 -->
    </head>
 
    <docTitle>
        <text>{{ book.title }}</text>
    </docTitle>
 
    <docAuthor>
        <text>{{ book.author }}</text>
    </docAuthor>
 
    <navMap>
{% for item in app.get('publishing.items') %}
        {# editions define the *tocable* items #}
        {% if item.config.element in edition.toc.elements|default([]) %}
        <navPoint class="chapter" id="{{ item.slug }}" playOrder="{{ loop.index }}">
            <navLabel><text>{{ '' != item.label ? item.label ~ ' ' ~ item.title : item.title }}</text></navLabel>
            <content src="{{ item.fileName }}" />
        </navPoint>
        {% endif %}
{% endfor %}
    </navMap>
 
</ncx>