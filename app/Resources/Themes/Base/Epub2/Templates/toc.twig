{% extends 'layout.twig' %}

{% block title %}{{ item.title }}{% endblock %}

{% block body %}
<h1 class="title" id="{{ item.slug }}"><span>{{ item.label }}</span> {{ item.title }}</h1>
<div class="item toc">
    {% for item in app.get('publishing.items') %}
        {# editions define the *tocable* items #}
        {% if item.config.element in edition.toc.elements|default([]) %}
    
            {# item has several elements in its toc #}
            {% if item.toc|length > 0 %}
                {% for entry in item.toc %}
                    {% if entry.level <= edition.toc.deep %}
                        <div class="{{ item.config.element }} level-{{ entry.level }}">
                            <a href="{{ item.fileName }}#{{ entry.level == 1 ? item.slug : entry.slug }}">
                                {% if '' != entry.label %}
                                    <span>{{ entry.label }}</span> - {{ entry.title }}
                                {% else %}
                                    {{ entry.title }}
                                {% endif %}                                
                            </a>
                        </div>
                    {% endif %}
                {% endfor %}
    
            {# empty or special item (anything different from 'chapter' and 'appendix' #}
            {% else %}
                <div class="{{ item.config.element }} level-1">
                    <a href="{{ item.fileName }}#{{ item.slug }}">
                        {% if '' != item.label %}
                            <span>{{ item.label }}</span> - {{ item.title }}
                        {% else %}
                            {{ item.title }}
                        {% endif %}
                    </a>
                </div>
            {% endif %}
        {% endif %}
    {% endfor %}
</div>
{% endblock %}
